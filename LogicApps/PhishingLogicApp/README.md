# User Submitted Phishing Analysis with Security Copilot

## Author
Craig Freyman

## Overview

This solution automates the analysis of user-submitted phishing emails using Security Copilot. It is designed to provide flexibility, allowing integration with or without Microsoft Defender for Office 365's Report Phishing capability.

### Key Features

- **Automated Phishing Analysis**: Processes user-submitted phishing emails in real-time.
- **Office 365 Integration**: Monitors a shared mailbox for phishing email submissions.
- **Behavioral and Psychological Analysis**: Detects sophisticated phishing attempts by analyzing behavioral and psychological traits.
- **HTML Report Generation**: Produces detailed HTML reports summarizing email analysis.
- **Sentinel/Defender Integration**: Updates incidents with comprehensive analysis, including email and security insights.

## Deployment
The solution typically involves deploying two main components:

1. **Function App**
2. **Logic App**

## Solution Variants
There are four versions of the Logic App available, each tailored to specific use cases:

### 1. **PhishingLA_MDTI**
- **Description**: Uses Microsoft Defender Threat Intelligence (MDTI) for threat intelligence.
- **Functionality**: Monitors a specified mailbox (not a shared mailbox) and emails a detailed report of the analysis.
- **Output**: Generates an emailed analysis report.

### 2. **PhishingLA_Sentinel_Comments_sysmng_identity**
- **Description**: Does not use MDTI and utilizes a system-managed identity for authentication.
- **Functionality**: Adds comments to Sentinel incidents and emails a detailed analysis report.
- **Output**: Updates Sentinel incidents with comments and sends an emailed analysis report.

### 3. **PhishingLA_Sentinel_Comments_usrmg_identity**
- **Description**: Does not use MDTI and utilizes a user-managed identity for authentication.
- **Functionality**: Adds comments to Sentinel incidents and emails a detailed analysis report.
- **Output**: Updates Sentinel incidents with comments and sends an emailed analysis report.

### 4. **PhishingLA_SharedMailboxOnly**
- **Description**: Uses a shared mailbox, as defined in Entra, as the trigger.
- **Functionality**: Emails a detailed analysis report.
- **Output**: Sends an emailed analysis report.

## Getting Started

1. Clone the repository.
2. Deploy the required **Function App** and **Logic App** as per your chosen variant.
3. Configure the necessary integrations, including:
   - Shared mailbox settings
   - Microsoft Sentinel or Defender configurations (if applicable)
4. Monitor real-time phishing email submissions and view detailed reports generated by the solution.

## Contributions
Contributions and suggestions are welcome! Feel free to open an issue or submit a pull request to improve this solution.

## License
This project is licensed under the MIT License. See the LICENSE file for details.

